function applySavingBlockText(){$(".savingBlockText").text(function(){return $(this).text().replace(".00"," ")})}function ApplyStarRating(){jQuery(".starRating").stars()}function ScrollTop(){$("html").scrollTop(0)}function ApplyOoSGrey(){$('#pdList li:contains("Out Of Stock")').each(function(){$(this).find(".hypsmallImage > img").addClass("hypsmallImageOut"),$(this).find(".ProdImage .hypsmallImage .imgMain").css("opacity","0.3")})}function emptyFreebie(){$("#pdList li").each(function(){$(".webOffers > span").is(":empty")&&$(this).find(".webOffers > span").addClass("plEmptyFreebie")})}function catRefListing(){$(".ProductHead").each(function(){$(this).find(".CatRefGridList").appendTo($(this).find(".desc"))})}function variantSelectOption(){$(".fbtVariantOptions > li > select").change(function(e){console.log("The select option has been changed"),$("#360Content").hide(),$(".button360 a, .btnOpenMagic360Embedded").on("click",function(){$("#360Content").show()})})}function retailGetIp(){$.getJSON("https://jsonip.com?callback=?",function(e){var t=e.ip,o="82.132.235.93",s="81.143.219.150",a="5.2.121.30",c="87.224.72.223";if($(".prod-buying-section-container").removeClass(".prod-buying-section-container"),t==s){$(".StockCheckResult").replaceWith($(".StockCheckLeyton").addClass("StockCheckResult"));$(".StockCheckLeyton").text();$(".retail-home-welcome h2 > span").text("LEYTON"),console.log("You are at the leyton store")}else if(t==a){$(".StockCheckResult").replaceWith($(".StockCheckWalthamstow").addClass("StockCheckResult"));$(".StockCheckWalthamstow").text();$(".retail-home-welcome h2 > span").text("WALTHAMSTOW"),console.log("You are at the Walthamstow store")}else if(t==c){$(".StockCheckResult").replaceWith($(".StockCheckHarlow").addClass("StockCheckResult"));$(".StockCheckHarlow").text();$(".retail-home-welcome h2 > span").text("HARLOW"),console.log("You are at the Harlow store")}else if(t==o){$(".StockCheckResult").replaceWith($(".StockCheckHarlow").addClass("StockCheckResult"));$(".StockCheckHarlow").text();$(".retail-home-welcome h2 > span").text("HEAD OFFICE"),console.log("you are at the head office but using the Debden stock levels")}else console.log("You are not in any of the stores");if(t==s||t==a||t==c||t==o){var l=$("#StoreStockValue span").html($(this).find(":selected").val()),r=$(".StockCheckResult").text();""===r&&$("#StoreStockValue > h2").addClass("emptyValue"),$(l).each(function(){var e=$(this).text();console.log(e),e=e.substr(0,e.lastIndexOf(".")),$(this).text(e)})}t==s||t==a||t==c||t==o?($("head:first").prepend('<link rel="stylesheet" href="https://its-london-css-js.s3-eu-west-1.amazonaws.com/css/retail/retail-its.min.css" type="text/css" />'),$("head").append('<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">'),$("head").append('<link rel="stylesheet" href="https://use.typekit.net/mrh2xsk.css">'),$(".VarQty").prependTo($("#StoreStockcheck")),$(".fbtVariantOptions select option").each(function(){var e=$(this).text();console.log(e),e.split("- In Stock")[0];var t=e.split("- In Stock")[0];$(this).text(t)}),$(document).ready(function(){var e=$(".StockCheckResult").text(),t="0",o=$(".check-rstore-main:selected").val(),s=0,a=$("#StoreStockValue h2").hasClass("retail-oos-text");$(".retail-bom-display").each(function(){var e=$(this).find('.retailBomCode:contains("BOM")');e.length>0?($(this).find(".retailBomCode").addClass("retail-bom-true"),$("#StoreStockcheck").hide()):($(this).find(".retailBomCode").removeClass("retail-bom-true"),$(this).find(".retailBomCode").addClass("retail-bom-false"),$("#StoreStockcheck").show())}),e==t?(console.log("This store is out of stock on this product"),$(this).css("color","red"),$("#StoreStockValue h2").removeClass("retail-oos-main-text"),$("#StoreStockValue h2").addClass("retail-oos-text"),$("#storeStockSelect .check-rstore-main").css("color","#d09402"),$("#storeStockSelect .check-rstore-main").text("Delivery to store or you")):($(this).css("color","#1ca902"),$("#StoreStockValue h2").removeClass("retail-oos-main-text"),$("#StoreStockValue h2").removeClass("retail-oos-text"),$("#storeStockSelect .check-rstore-main").css("color","#d09402"),$("#storeStockSelect .check-rstore-main").text("Delivery to store or you")),1==a&&o==s?$("#StoreStockValue h2").attr("class","retail-oos-main-text").stop():$("#StoreStockValue h2").removeClass("retail-oos-main-text").stop(),o>s?$("#StoreStockValue h2").attr("class","retail-inStock-main-text").stop():$("#StoreStockValue h2").removeClass("retail-inStock-main-text").stop(),$(".retail-home-search").click(function(e){e.preventDefault(),$(".retail-home-welcome").hide("slow"),$(".retail-home-search").addClass("retail-home-search-small"),$(".retail-home-categories").addClass("retail-home-categories-small"),$("retail-home-search").show(),$(".retail-home-search").select()})})):console.log("This IP address is not a store IP address")})}function retailChangeOption(){$("#storeStockSelect").change(function(){$("#StoreStockValue").show();var e=$("#StoreStockValue span").html($(this).find(":selected").val());$(e).each(function(){var e=$(this).text();console.log(e),e=e.substr(0,e.lastIndexOf(".")),$(this).text(e);var t=$(".StockCheckResult").text(),o="0",s=$(".check-rstore-main:selected").val(),a=0,c=$("#StoreStockValue h2").hasClass("retail-oos-text");t==o?(console.log("This store is out of stock on this product"),$(this).css("color","red"),$("#StoreStockValue h2").removeClass("retail-oos-main-text"),$("#StoreStockValue h2").addClass("retail-oos-text"),$("#storeStockSelect .check-rstore-main").css("color","#d09402"),$("#storeStockSelect .check-rstore-main").text("Delivery to store or you")):($(this).css("color","#1ca902"),$("#StoreStockValue h2").removeClass("retail-oos-main-text"),$("#StoreStockValue h2").removeClass("retail-oos-text"),$("#storeStockSelect .check-rstore-main").css("color",""),$("#storeStockSelect .check-rstore-main").text("Delivery to store or you")),1==c&&s==a?$("#StoreStockValue h2").attr("class","retail-oos-main-text").stop():$("#StoreStockValue h2").removeClass("retail-oos-main-text").stop(),s>a?$("#StoreStockValue h2").attr("class","retail-inStock-main-text").stop():$("#StoreStockValue h2").removeClass("retail-inStock-main-text").stop()})})}function EndRequestHandler(e,t){$(".MagicZoomPlusItem > a").on("click",function(){ShowMagicZoom()}),variantSelectOption(),ApplyOoSGrey(),emptyFreebie(),catRefListing(),applySavingBlockText(),ApplyStarRating(),ScrollTop(),retailGetIp(),retailChangeOption()}variantSelectOption(),Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler),ApplyStarRating();